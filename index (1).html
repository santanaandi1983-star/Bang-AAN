<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>My Lovely Nanadd</title>
  <style>
    :root{
      --cream:#f8f5f0;
      --pink:#fff0f6;
      --text:#3b2f2f;
    }
    html,body{height:100%;margin:0;font-family:Georgia, serif;background:linear-gradient(180deg,var(--cream) 0%, #fff0f6 100%);-webkit-font-smoothing:antialiased;}
    .bg-blur{position:fixed;inset:0;background:radial-gradient(600px 400px at 10% 20%, rgba(255,240,240,0.65), transparent 20%), radial-gradient(600px 400px at 90% 80%, rgba(255,245,240,0.5), transparent 20%);pointer-events:none;filter:blur(18px) saturate(1.05);z-index:0;}
    .wrap{min-height:150vh;display:flex;align-items:flex-start;justify-content:center;padding:80px 20px 120px;box-sizing:border-box;} /* taller to allow scrolling */
    .letter{width:100%;max-width:720px;background:rgba(255,255,255,0.92);border-radius:14px;padding:36px 48px;color:var(--text);box-sizing:border-box;transform:translateY(40px);opacity:0;transition:transform 800ms cubic-bezier(.2,.9,.3,1),opacity 800ms ease;z-index:2;}
    .letter.show{transform:translateY(0);opacity:1;}
    h1{font-family:'Dancing Script',cursive;font-size:2.1rem;margin:0 0 18px 0;color:#6b4b3e;text-align:center;}
    .lead{font-style:italic;display:block;margin-bottom:16px;font-size:1.05rem;}
    p{margin:0 0 14px 0;line-height:1.7;font-size:1.05rem;}
    .signature{text-align:right;margin-top:30px;font-family:'Dancing Script',cursive;font-size:1.4rem;color:#6b4b3e;}
    .footer-note{margin-top:18px;text-align:center;font-size:0.95rem;color:rgba(59,47,47,0.7);font-style:italic;}
    .heart{position:fixed;left:18px;bottom:20px;width:56px;height:56px;border-radius:50%;background:linear-gradient(180deg, rgba(255,190,200,0.98), rgba(255,160,185,0.98));display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 6px 18px rgba(0,0,0,0.08);border:none;z-index:3;transition:transform 220ms ease,box-shadow 220ms ease;}
    .heart::before{content:'❤';color:white;font-size:22px;line-height:1}
    .heart.pulse{animation:pulse 1.8s infinite;}
    @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}100%{transform:scale(1)}}
    audio{display:none}
    @media (max-width:600px){.letter{padding:24px 18px;border-radius:12px}h1{font-size:1.8rem}.heart{left:12px;bottom:16px;width:50px;height:50px}}
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
</head>
<body>
  <div class="bg-blur" aria-hidden="true"></div>
  <div class="wrap">
    <article class="letter" id="letter">
      <h1>Untuk Nadia</h1>
      <span class="lead">Aku menulis ini bukan untuk mengulang masa lalu, tapi untuk mengenang sesuatu yang pernah berarti.</span>
      <p>Aku nggak tahu apakah kamu masih mau membaca sesuatu dariku, tapi kalau pun tidak, aku tetap ingin menuliskannya — supaya kamu tahu, semua yang pernah terjadi tidak pernah aku anggap sia-sia.</p>
      <p>Terima kasih, Nadia. Untuk waktu, perhatian, dan rasa yang pernah kamu kasih. Aku tahu, mungkin sekarang banyak hal yang berubah, dan mungkin juga aku nggak lagi terlihat seperti orang yang kamu kenal dulu. Tapi semua yang kulakukan waktu itu, termasuk pergi, adalah untuk hal yang aku pikir benar — meskipun ternyata, itu juga membuat jarak di antara kita makin jauh.</p>
      <p>Aku sadar, ada banyak salah paham, banyak emosi, dan mungkin banyak kata yang akhirnya melukai. Aku nggak minta kamu melupakan semuanya, cuma ingin kamu tahu bahwa aku nggak pernah berhenti menghargai kamu.</p>
      <p>Kalau suatu hari semesta kasih kesempatan lagi, aku nggak mau memaksakan apa pun. Aku cuma pengen ketemu kamu lagi dengan hati yang lebih tenang, buat bilang: “aku tetap berterima kasih pernah mengenalmu.”</p>
      <p>Jaga dirimu baik-baik ya, Nad. Dunia ini besar, tapi aku percaya, kenangan yang tulus nggak akan pernah benar-benar hilang.</p>
      <div class="signature">— Bang AAN</div>
      <div class="footer-note">Untuk seseorang yang akan selalu berarti</div>
    </article>
  </div>
  <button class="heart pulse" id="heart" aria-label="Play music"></button>
  <audio id="bg" autoplay muted>
    <source src="Natta Reza - Kekasih Impian  Official Music Video.mp3" type="audio/mpeg">
    Browsermu tidak mendukung audio.
  </audio>
  <script>
    const letter = document.getElementById('letter');
    const audio = document.getElementById('bg');
    const heart = document.getElementById('heart');
    let userInteracted = false;
    const SCROLL_DURATION = 35000; // 35 seconds
    // Show letter (slide up)
    window.addEventListener('load', ()=>{
      setTimeout(()=> letter.classList.add('show'), 120);
      // set audio start when metadata loaded or fallback later
      audio.addEventListener('loadedmetadata', ()=> {
        try{ audio.currentTime = 80; }catch(e){}
      });
      // Attempt to play (muted allowed)
      audio.play().catch(()=>{});
      // Start auto-scroll after tiny delay so layout stable
      setTimeout(startAutoScroll, 400);
    });
    // stop at 120s
    audio.addEventListener('timeupdate', ()=>{
      if(audio.currentTime >= 120){ audio.pause(); }
    });
    // Auto-scroll implementation: scroll from current to target over duration
    function startAutoScroll(){
      // Compute target: align bottom of letter with bottom of viewport
      const rect = letter.getBoundingClientRect();
      const current = window.scrollY || window.pageYOffset;
      const target = Math.max(0, (rect.top + current + letter.offsetHeight) - window.innerHeight + 20);
      const start = performance.now();
      function step(now){
        const elapsed = now - start;
        const t = Math.min(1, elapsed / SCROLL_DURATION);
        // easeInOutQuad
        const ease = t<0.5 ? 2*t*t : -1 + (4 - 2*t)*t;
        window.scrollTo(0, current + (target - current) * ease);
        if(t < 1){ requestAnimationFrame(step); }
      }
      requestAnimationFrame(step);
    }
    // user interaction handlers
    function enableSoundAndPlay(){
      if(!userInteracted){
        userInteracted = true;
        audio.muted = false;
        audio.play().catch(()=>{});
        heart.classList.remove('pulse');
      }
    }
    function replay(){
      try{ audio.currentTime = 80; }catch(e){}
      audio.muted = false;
      audio.play().catch(()=>{});
      userInteracted = true;
      heart.classList.remove('pulse');
      // restart auto-scroll if finished
      startAutoScroll();
    }
    document.addEventListener('click',(e)=>{
      if(e.target === heart || heart.contains(e.target)){ replay(); }
      else { enableSoundAndPlay(); }
    }, {once:false});
    document.addEventListener('keydown',(e)=>{
      if(!userInteracted && (e.key === ' ' || e.key === 'Enter')) enableSoundAndPlay();
    });
  </script>
</body>
</html>
